---
globs: ["**/*.java", "**/*.yml", "**/*.properties", "**/*.yaml"]
autoFix: true
version: "5.0.0"
---

# CODE QUALITY

## JAVA 21
Virtual threads, pattern matching, records (5+ params → Builder), text blocks

## METRICS
**Limits**: 250 lines/file, 10 cyclomatic, 10 cognitive complexity | **If exceeded**: Refactor (extract methods, split files) | **Formatting**: 100 chars/line, Palantir Java Format (Spotless) | **Suppressions**: Document why, fix root cause

## STANDARDS
SOLID, Clean Architecture, DRY, KISS | Final fields, immutable | Constructor injection | @Nullable/@NonNull | Validation: @Email, @NotNull, @Size | Senior+ level: production-ready, maintainable, testable

## SPRING & ENV
@Configuration, @Bean | @Transactional (service, readOnly) | ❌ System.getenv() → ✅ @Value("${app.key:default}") | Profiles: application-{profile}.yml | ❌ Secrets in code → env vars

## LOGGING & SECURITY
Structured: `log.info("key={}", value)` | DEBUG/INFO/WARN/ERROR | ❌ Concat, passwords/tokens | @Secret passwords | Parameterized queries (JPQL) | Input validation
