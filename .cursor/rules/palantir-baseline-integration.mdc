---
globs: ["**/entity/**/*.java", "**/view/**/*.java", "**/service/**/*.java", "**/test/**/*.java", "**/*Test*.java", "build.gradle", "config/spotbugs/**", "config/sonar-project.properties", ".baseline/**"]
alwaysApply: false
autoFix: false
version: "1.1.0"
---

# PALANTIR BASELINE INTEGRATION

## PRINCIPLE
**CRITICAL**: Use Baseline out-of-the-box, do NOT customize unless absolutely necessary | Baseline manages versions, configurations, and defaults automatically | ‚ùå Do NOT override Baseline-managed versions (Error Prone, Checkstyle, PMD, SpotBugs) | ‚úÖ Let Baseline manage everything | Only add framework-specific suppressions when needed (Lombok, Jmix)

## APPLIED PLUGINS
- `com.palantir.baseline` (6.76.0) - Checkstyle, PMD, SpotBugs, Spotless auto-config
- `com.palantir.baseline-idea` (6.76.0) - IntelliJ IDEA config
- `com.palantir.baseline-exact-dependencies` (6.76.0) - checkUnusedDependencies, checkImplicitDependencies
- `com.palantir.baseline-error-prone` (6.76.0) - Error-prone static analysis
- `com.palantir.baseline-class-uniqueness` (6.76.0) - Check duplicate classes
- `com.palantir.baseline-prefer-project-modules` (6.76.0) - Prefer project modules

## CONFIGURATION
**Checkstyle**: Baseline manages via `.baseline/checkstyle/checkstyle.xml` | Custom suppressions in `.baseline/checkstyle/custom-suppressions.xml` (NOT `checkstyle-suppressions.xml` - auto-generated) | **PMD**: ‚úÖ Baseline defaults (DO NOT use `ruleSetFiles` - overrides Baseline), suppress via `@SuppressWarnings("PMD.RuleName")` | **SpotBugs**: Baseline defaults, only specific exclusions for Lombok/Jmix in `config/spotbugs/exclude.xml`

**Suppression Policy**: See `@suppress-policy.mdc` for comprehensive guidelines

## FORMATTING
- **Command**: `./gradlew format` (Baseline format task)
- **Spotless**: Baseline auto-configures `importOrder`, `removeUnusedImports`, `trimTrailingWhitespace`, `endWithNewline`
- **Additional**: `cleanthat()`, `formatAnnotations()`, `lineEndings = 'UNIX'`, `palantirJavaFormat('2.68.0')`
- **Priority**: Auto-format takes precedence over Checkstyle indentation (Indentation checks suppressed)

## CHECKSTYLE SUPPRESSIONS
- **Per-line/block**: `@SuppressWarnings("checkstyle:rulename")` (lowercase, without "Check")
- **Comments**: `// CHECKSTYLE:OFF` ... `// CHECKSTYLE:ON` (for IllegalImport, etc.)
- **File-level**: `.baseline/checkstyle/custom-suppressions.xml` (NOT `checkstyle-suppressions.xml`)

## COPYRIGHT
- **Templates**: `.baseline/copyright/*.txt` | Largest file (lexicographically) used for new files
- **Current**: `999_apache-minimal.txt` - Minimal Apache License 2.0 format (2 lines), Digital Technologies and Platforms LLC
- **Update**: `./gradlew format` auto-updates copyright headers

## UPDATE
- `./gradlew baselineUpdateConfig` - updates `.baseline/checkstyle/checkstyle.xml` and `checkstyle-suppressions.xml` (does NOT overwrite `custom-suppressions.xml`)

## BEST PRACTICES
- ‚úÖ **Use Baseline out-of-the-box**: Let Baseline manage versions and configurations
- ‚úÖ Use `./gradlew format` before commit (Baseline format task)
- ‚úÖ Suppressions only in `custom-suppressions.xml`, not in auto-generated files
- ‚úÖ Format code first, then suppress only when necessary
- ‚úÖ **PMD**: Use Baseline defaults, suppress via `@SuppressWarnings("PMD.RuleName")` (DO NOT use `ruleSetFiles`)
- ‚úÖ **SpotBugs**: Use Baseline defaults, add only specific exclusions for Lombok/Jmix
- ‚úÖ **Error Prone**: Use Baseline-managed version, only disable specific checkers for framework patterns
- ‚úÖ **Lombok**: See `@lombok-baseline-integration.mdc` for Lombok-specific suppressions
- ‚ùå **NEVER** override Baseline-managed versions (Error Prone, Checkstyle, PMD, SpotBugs)
- ‚ùå **NEVER** use `pmd { ruleSetFiles = ... }` - completely overrides Baseline defaults
- ‚ùå **NEVER** customize Baseline configurations unless framework-specific suppressions are needed
- üìñ See `@suppress-policy.mdc` for detailed suppression guidelines
