---
globs: ["**/report/**/*.java", "**/email/**/*.java", "**/bpm/**/*.java", "**/notification/**/*.java"]
autoFix: true
version: "1.0.0"
---

# JMIX ADD-ONS

## REPORTS
**Dependency**: `io.jmix.reports:jmix-reports-starter` | **Designer**: Studio Report Designer | **Formats**: XLSX, DOCX, PDF, HTML, CSV

**Patterns**: Template bands → DataManager queries | Parameters → user input | Output types → download/inline

**Best Practices**: ✅ Use FetchPlan in queries | ✅ Pagination for large datasets | ✅ Cache heavy reports | ❌ N+1 queries in bands

## EMAIL
**Dependency**: `io.jmix.email:jmix-email-starter` | **Config**: `jmix.email.*` properties

**API**: `emailer.sendEmail(EmailInfo)` | **Templates**: Freemarker/Thymeleaf | **Attachments**: `EmailAttachment`

**Best Practices**: ✅ Async sending (`emailer.sendEmailAsync()`) | ✅ Templates for HTML | ✅ Queue for bulk | ❌ Blocking send in transactions

## BPM
**Dependency**: `io.jmix.bpm:jmix-bpm-starter` | **Engine**: Flowable | **Designer**: Studio BPMN Designer

**Patterns**: User Tasks → Views | Service Tasks → Spring beans | Events → `@EventListener`

**Best Practices**: ✅ Short transactions | ✅ Async service tasks for long ops | ✅ Error boundary events | ❌ Heavy logic in expressions

## NOTIFICATIONS
**Dependency**: `io.jmix.notifications:jmix-notifications-starter`

**API**: `notificationManager.create()` → `withRecipient()` → `withSubject()` → `send()`

**Channels**: In-app, Email | **Best Practices**: ✅ Batch notifications | ✅ User preferences

## AUDIT
**Dependency**: `io.jmix.audit:jmix-audit-starter` | **Auto**: Entity changes tracked

**API**: `entityLog.getEntityLogs(entity)` | **Config**: Enable per-entity in Studio

## MAPS
**Dependency**: `io.jmix.maps:jmix-maps-starter` | **Provider**: Mapbox/OpenStreetMap

**Components**: `GeoMap`, `Canvas` | **Data**: `@Geometry` fields (Point, Polygon, LineString)

## QUICK REFERENCE
| Add-on | Use Case | Key API |
|--------|----------|---------|
| Reports | PDF/Excel generation | `ReportRunner.run()` |
| Email | Send emails | `Emailer.sendEmail()` |
| BPM | Business processes | `ProcessEngine`, User Tasks |
| Notifications | User notifications | `NotificationManager` |
| Audit | Change tracking | `EntityLog` |
| Maps | Geolocation | `GeoMap`, `@Geometry` |
