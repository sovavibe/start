---
globs: ["**/entity/**/*.java", "**/view/**/*.java", "**/service/**/*.java", "**/test/**/*.java", "**/*Test*.java", "build.gradle", "config/spotbugs/**", "config/sonar-project.properties", ".baseline/**"]
alwaysApply: false
autoFix: false
version: "1.1.0"
---

# SUPPRESSION POLICY

## PRINCIPLES
**Vibe Coding**: Minimal suppressions, maximum code quality | **Token Economy**: Optimize suppression usage | **Framework-Specific**: Only suppress Jmix/Vaadin/Lombok false positives | **Central First**: Prefer central config for mass patterns, inline only for unique cases | **AI-Friendly**: See `@ai-false-positives.mdc` for quick decision making

## WHEN TO SUPPRESS

### ✅ Inline `@SuppressWarnings` (Preferred)
**When**: Framework-specific false positives that cannot be fixed in code

**Requirements**:
- ✅ Always include justification comment
- ✅ Be specific: Use exact rule name (`PMD.RuleName`, `java:S110`, `checkstyle:rulename`)
- ✅ Minimal scope: method > class > package
- ✅ Framework-specific only: Jmix/Vaadin/Lombok patterns, not general code quality

**Examples**: Jmix View lifecycle (`onInit`, `onReady`), Lombok-generated code, test reflection patterns

```java
@SuppressWarnings("java:S110") // Framework: Jmix views extend multiple framework classes
public class UserDetailView extends StandardDetailView<User> { }
```

### ✅ Centralized Configs (Mass Framework Patterns)
**Where**: `config/spotbugs/exclude.xml` (EclipseLink), `config/sonar-project.properties` (Jmix/Vaadin), `.baseline/checkstyle/custom-suppressions.xml` (Lombok)

**Requirements**: Narrow scope (package patterns), documented, framework-only

### ❌ NEVER Global Rule Disabling
**Forbidden**: PMD custom rulesets overriding Baseline, global Checkstyle suppressions, Error Prone disabling without justification

**Why**: Loses Baseline advantages, hides real bugs

## SUPPRESSION HIERARCHY (Most to Least Preferred)
1. **Fix the code** - Best, no suppression needed
2. **Inline `@SuppressWarnings`** - Visible, local, documented
3. **Central config (narrow scope)** - Mass framework patterns only
4. **Global rule disabling** - ❌ NEVER (except Baseline-managed)

## FRAMEWORK PATTERNS

| Context | Rules | Format |
|---------|-------|--------|
| Jmix/Vaadin | S110, S2177, S1948 | `@SuppressWarnings("java:S110") // Framework: reason` |
| Lombok | AtLeastOneConstructor, javadoc | `@SuppressWarnings("PMD.RuleName")` |
| EclipseLink | ES/EI patterns | `config/spotbugs/exclude.xml` |
| Tests | AvoidAccessibilityAlteration, NullAssignment | `@SuppressWarnings("PMD.RuleName") // Test: reason` |

## QUALITY GATES & MAINTENANCE
- CI fails on violations: `ignoreFailures = false`
- Coverage: 85% instruction, 75% branch, 90% line
- Review on Baseline/framework updates, consolidate duplicates
- See `@ai-false-positives.mdc` for quick AI decision making
