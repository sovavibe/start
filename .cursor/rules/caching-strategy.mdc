---
globs: ["**/*Cache*.java", "**/cache/**/*.java", "**/*Service*.java"]
autoFix: true
version: "6.0.0"
---

# CACHING

## STACK
@UIScope/@SessionScope | Spring Events | TTL | ConcurrentHashMap | UI.access()

## RULES
Scope: @UIScope (tab) | @SessionScope (shared) | Config: @Value defaults | Invalidation: @EventListener + TTL 1-5min | Bounded: LRU eviction

## REACTIVE UI (@Push)
✅ Cache invalidate immediately → UI debounce 300-500ms with UI.access()
❌ Cooldown in cache → stale | beforeClientResponse() → no push
Rule: Cooldown at UI layer, NOT cache (data consistency > performance)

## ANTIPATTERNS
Static cache → leak | TTL only → stale | Unbounded → leak | Logging in get() → overhead | beforeClientResponse() → no push | Cooldown >500ms → poor UX | Cooldown in cache → data inconsistency
