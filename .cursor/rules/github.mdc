---
globs: ["**/*.md", "**/*.java", "**/*.gradle", "**/*.properties"]
autoFix: false
version: "1.0.0"
---

# GITHUB WORKFLOW

## AUTHENTICATION
✅ Use `gh auth login --with-token` for token authentication
✅ Tokens stored in system keyring (NOT in code/.env)
✅ Use `gh auth switch` to switch between accounts
✅ Run `gh auth setup-git` after authentication

## REPOSITORY OPERATIONS
✅ Create repo: `gh repo create <name> --public --source=. --remote=origin`
✅ View repo: `gh repo view --web`
✅ Clone: `gh repo clone <owner>/<repo>`

## COMMITS
✅ ALWAYS use Conventional Commits format (see `@conventional-commits.mdc`)
✅ Format: `<type>[scope]: <description>`
✅ Types: feat, fix, docs, refactor, test, chore, perf, style
✅ Scopes: jmix, vaadin, entity, view, service, security, liquibase, ui, api, db, config, test
✅ Examples:
  - `feat(vaadin): add flashcard creation view`
  - `fix(service): resolve null pointer`
  - `refactor(service): extract payment calculation logic`
✅ Enforced via commitlint in GitHub Actions

## BRANCH WORKFLOW
1. Create branch: `git checkout -b feat/scope-description` (see `@branch-naming.mdc`)
2. Make changes and commit: `git commit -m "feat(scope): description"` (see `@conventional-commits.mdc`)
3. Push branch: `git push -u origin feat/scope-description`
4. Create PR: `./scripts/create-pr.sh` (auto-generates description from diff)
5. After review: `gh pr merge --squash`

## BRANCH NAMING
✅ Format: `<type>/<scope>-<description>` or `<type>/task-<number>/<description>` (see `@branch-naming.mdc`)
✅ Types: feat, fix, docs, refactor, perf, test, build, chore, revert
✅ Scopes: jmix, vaadin, entity, view, service, security, liquibase, ui, api, db, config, test, ci, deps, docs
✅ Special: 
  - For `docs` type, scope is optional (e.g., `docs/add-sdlc-and-workflow-automation`)
  - Task format: `<type>/task-<number>/<description>` or `<type>/<scope>-task-<number>/<description>`
✅ Examples: 
  - `feat/vaadin-add-login-form`
  - `fix/jmix-resolve-npe`
  - `docs/add-sdlc-and-workflow-automation` (scope optional, preferred)
  - `feat/task-111/add-login-form` (task format)
  - `feat/vaadin-task-123/add-user-profile` (task format with scope)
❌ Enforced in GitHub Actions (blocks merge if invalid)

## PULL REQUESTS
✅ Create: `./scripts/create-pr.sh` (auto-generates description from diff)
✅ Create manual: `gh pr create --title "Title" --body "Description"`
✅ List: `gh pr list`
✅ View: `gh pr view <number>`
✅ Merge: `gh pr merge <number> --squash`
✅ SpotBugs review: Added automatically when PR is opened (see `.github/workflows/pr-spotbugs-review.yml`)

## DEPENDABOT
✅ One PR per ecosystem (gradle, github-actions, docker) with groups
✅ Group all updates (patch + minor) in single PR per ecosystem
✅ Limit open PRs: 1 per ecosystem
✅ Monthly schedule for non-critical updates
✅ Manual review for all PRs (no auto-merge)
✅ Major updates ignored automatically (require manual review)

## ISSUES
✅ Create: `gh issue create --title "Title" --body "Description"`
✅ List: `gh issue list`
✅ View: `gh issue view <number>`
✅ Close: `gh issue close <number>`

## SECURITY
❌ NEVER commit tokens to code
❌ NEVER add tokens to .env files
❌ NEVER share tokens publicly
✅ Tokens in system keyring only
✅ Use `gh auth login` for authentication

## QUICK COMMANDS
- `gh status` - check auth status
- `gh repo view --web` - open repo in browser
- `gh pr create` - create pull request
- `gh issue create` - create issue
