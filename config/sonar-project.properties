# SonarQube/SonarLint project configuration
# Single source of truth - used by SonarQube/SonarCloud, Gradle plugin, and IntelliJ IDEA (Connected Mode)
#
# IMPORTANT: When adding new exclusions here, also update:
# - build.gradle: sonarLint.rules.disable() (for Gradle plugin)
# - IntelliJ IDEA: If using Standalone Mode, disable rules manually in Settings
#
# Following Jmix/Vaadin framework best practices - global exclusions for framework patterns
# See docs/sonarlint-centralized-config.md for detailed configuration guide

# Cognitive complexity threshold (strict for vibe coding)
sonar.java.complexity.max=10

# Code duplication threshold (strict quality gate)
# Maximum 3% duplicated lines - industry standard for high-quality code
sonar.cpd.java.minimumtokens=50
# Note: Duplication percentage is checked via SonarQube quality gates, not properties

# Source encoding
sonar.sourceEncoding=UTF-8

# Java version
sonar.java.source=21
sonar.java.target=21

# Lombok compatibility: Exclude MissingJavadocMethod for Lombok-generated code
# Lombok generates getters, setters, equals, hashCode, toString, constructors
# These methods follow standard JavaBean conventions and are generated code
# Consolidated from e1, e2, e3 into single exclusion
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7,e8,e9,e10,e11,e12,e13,e14

# Exclude MissingJavadocMethod for Lombok-generated methods (getters, setters, equals, hashCode, toString, constructors)
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S1186
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*Entity.java,**/*Dto.java,**/*Record.java

# Framework compatibility: Exclude DesignForExtension for Jmix/Vaadin framework classes
# Framework views extend StandardView, StandardListView, StandardDetailView
# Using specific package patterns instead of broad filename patterns
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S2150
sonar.issue.ignore.multicriteria.e3.resourceKey=**/view/**/*View.java,**/*Configuration.java,**/*Repository.java,**/*User.java,**/*Application.java

# Framework compatibility: Exclude MissingJavadocMethod for framework lifecycle methods
# Jmix/Vaadin lifecycle methods: onInit, onReady, onBeforeSave, onAfterSave, etc.
# Also excludes @Install methods (Vaadin framework callbacks)
# Using specific package pattern instead of broad filename pattern
sonar.issue.ignore.multicriteria.e2.ruleKey=java:S1186
sonar.issue.ignore.multicriteria.e2.resourceKey=**/view/**/*View.java

# Framework compatibility: Exclude serialization issues for Vaadin views and Spring Boot application
# Vaadin views and Spring Boot application contain non-serializable framework dependencies
# These are framework-managed and don't need to be serializable
# Using specific package patterns - SonarLint uses relative paths from project root
sonar.issue.ignore.multicriteria.e4.ruleKey=java:S1948
sonar.issue.ignore.multicriteria.e4.resourceKey=**/src/main/java/**/view/**/*View.java,**/src/main/java/**/*Application.java

# Framework compatibility: Exclude S110 (Too many parents) for Jmix views
# Jmix views extend multiple framework classes (StandardView, StandardListView, etc.)
# Using specific package pattern - SonarLint uses relative paths from project root
sonar.issue.ignore.multicriteria.e5.ruleKey=java:S110
sonar.issue.ignore.multicriteria.e5.resourceKey=**/src/main/java/**/view/**/*View.java

# Framework compatibility: Exclude S2177 (Method name conflict) for framework lifecycle methods
# Jmix/Vaadin lifecycle methods may have same names as parent methods
# Using specific package pattern - SonarLint uses relative paths from project root
sonar.issue.ignore.multicriteria.e6.ruleKey=java:S2177
sonar.issue.ignore.multicriteria.e6.resourceKey=**/src/main/java/**/view/**/*View.java

# Framework compatibility: Exclude S6813 (Field injection) for @ViewComponent and @Value
# @ViewComponent is Vaadin/Jmix mechanism for UI component injection from XML (not Spring field injection)
# @Value is Spring injection for simple values (not beans), which is acceptable and commonly used
# These are framework-specific patterns, not anti-patterns
# Using specific package pattern instead of broad filename pattern
sonar.issue.ignore.multicriteria.e7.ruleKey=java:S6813
sonar.issue.ignore.multicriteria.e7.resourceKey=**/view/**/*View.java

# XML: Exclude S2068 (Hard-coded credentials) for UI labels only
# Jmix view XML files contain UI labels with "password" text, not actual credentials
# All view XML files use msg:// keys for internationalization, not hard-coded credentials
# Limited to view XML files only (excludes Liquibase changelog, config files)
sonar.issue.ignore.multicriteria.e8.ruleKey=xml:S2068
sonar.issue.ignore.multicriteria.e8.resourceKey=**/view/**/*.xml

# Test compatibility: Exclude S5738 (Deprecated class usage) for @MockBean in tests
# @MockBean is Spring Boot standard for mocking beans in tests
# While deprecated, it's still supported and widely used in Spring Boot testing
# Will be replaced when Spring Boot provides official replacement
sonar.issue.ignore.multicriteria.e9.ruleKey=java:S5738
sonar.issue.ignore.multicriteria.e9.resourceKey=**/src/test/java/**/*Test.java

# Test compatibility: Exclude S5976 (Parameterized tests) for test methods
# Some tests are clearer as separate methods rather than parameterized
# Parameterized tests can reduce readability for complex test scenarios
sonar.issue.ignore.multicriteria.e10.ruleKey=java:S5976
sonar.issue.ignore.multicriteria.e10.resourceKey=**/src/test/java/**/*Test.java

# Test compatibility: Exclude S5853 (Multiple assertions) for test methods
# Multiple assertions on same object are acceptable in tests for clarity
# Assertion chains can reduce readability in complex test scenarios
sonar.issue.ignore.multicriteria.e11.ruleKey=java:S5853
sonar.issue.ignore.multicriteria.e11.resourceKey=**/src/test/java/**/*Test.java

# Test compatibility: Exclude S4144 (Identical implementation) for test methods
# Test methods may have similar structure but test different scenarios
# Duplication in tests is acceptable when testing edge cases and boundary conditions
sonar.issue.ignore.multicriteria.e12.ruleKey=java:S4144
sonar.issue.ignore.multicriteria.e12.resourceKey=**/src/test/java/**/*Test.java

# Framework compatibility: Exclude S1172 (Unused method parameter) for framework event handlers
# Framework event handlers (LocaleChangeEvent, InitEvent, etc.) require parameter signature
# Parameter may be unused but required by framework interface
sonar.issue.ignore.multicriteria.e13.ruleKey=java:S1172
sonar.issue.ignore.multicriteria.e13.resourceKey=**/src/main/java/**/view/**/*View.java,**/src/main/java/**/view/**/*Helper.java

# Test compatibility: Exclude S1130 (Superfluous exception declaration) for test methods using reflection
# Test methods call invokeMethod() which can throw ReflectiveOperationException
# The throws clause is required even though SonarLint doesn't detect the indirect exception
sonar.issue.ignore.multicriteria.e14.ruleKey=java:S1130
sonar.issue.ignore.multicriteria.e14.resourceKey=**/src/test/java/**/*Test.java
